(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(t,e,i){t.exports=i(17)},,,,,function(t,e,i){},function(t,e,i){},,function(t,e,i){},function(t,e,i){"use strict";i.r(e);var o=i(0),n=i.n(o),c=i(6),a=i.n(c),s=(i(13),i(14),i(1)),r=i(2);function h(t){return t?{width:t.offsetWidth,height:t.offsetHeight}:{width:0,height:0}}i(16);var l=function(t){var e=t.animator,i=Object(o.useRef)(null),c=function(t,e){var i=Object(o.useState)(h(t?t.current:{})),n=Object(s.a)(i,2),c=n[0],a=n[1],l=Object(o.useCallback)(function(){if(t.current&&(a(h(t.current)),e)){var i=!0,o=!1,n=void 0;try{for(var c,s=e[Symbol.iterator]();!(i=(c=s.next()).done);i=!0)(0,c.value)()}catch(r){o=!0,n=r}finally{try{i||null==s.return||s.return()}finally{if(o)throw n}}}},[t]),u=Object(r.debounce)(l,300);return Object(o.useLayoutEffect)(function(){if(t.current)return u(),window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}},[t.current]),c}(i,[e.onResize]),a=(function(t,e){var i=Object(o.useRef)(t);Object(o.useLayoutEffect)(function(){i.current=t},[t]);var n=Object(o.useRef)();Object(o.useLayoutEffect)(function(){var i=t.current;if(null!=i)return e.setCanvas(i),n.current=requestAnimationFrame(e.doFrame),i.addEventListener("touchstart",e.touchStart),i.addEventListener("touchmove",e.touchMove),i.addEventListener("touchend",e.touchEnd),i.addEventListener("click",e.mouseLeft),i.addEventListener("contextmenu",e.mouseRight),function(){cancelAnimationFrame(n.current),i.removeEventListener("touchstart",e.touchStart),i.removeEventListener("touchmove",e.touchMove),i.removeEventListener("touchend",e.touchEnd),i.removeEventListener("click",e.mouseLeft),i.removeEventListener("contextmenu",e.mouseRight)}},[])}(i,e),c.width),l=c.height;return n.a.createElement("div",{className:"Canvas"},a,n.a.createElement("canvas",{ref:i,height:l,width:a}))},u=i(3),v=i(7),d=["#C0C0C0","#FF0000","#800000","#FFFF00","#808000","#00FF00","#008000","#00FFFF","#008080","#0000FF","#000080","#FF00FF","#800080"],f=Object.freeze({color:"black",lineWidth:5,callback:function(){},callbackInterval:1});function m(t,e,i){var o=Object.assign({},f,i),n=o.lineWidth,c=o.color,a=o.callback,s=t.getContext("2d"),r=t.width-n,h=t.height-n,l=2*(r+h),u=n/2,v=e/o.callbackInterval,d=0,m=l/e,g=0;return{reset:function(){g=0,d=0},draw:function(t){(g+=t)>e&&(g=e),g>=(d+1)*v&&(console.log("invocation ".concat(d)),a(),d++),s.beginPath(),s.lineWidth=n,s.strokeStyle=c,s.moveTo(u,u);var i=m*g;return i<=r?(s.lineTo(i+u,u),void s.stroke()):(s.lineTo(r+u,u),(i-=r)<=h?(s.lineTo(r+u,i+u),void s.stroke()):(s.lineTo(r+u,h+u),(i-=h)<=r?(s.lineTo(r-i+u,h+u),void s.stroke()):(s.lineTo(u,h+u),(i-=r)<=h?(s.lineTo(u,h-i+u),void s.stroke()):(s.lineTo(u,u),void s.stroke()))))}}}var g;!function(t){t[t.Empty=0]="Empty",t[t.Listening=1]="Listening",t[t.Selecting=2]="Selecting",t[t.Finished=3]="Finished"}(g||(g={}));var T=function t(){var e=this;Object(v.a)(this,t),this.touchStart=void 0,this.touchMove=void 0,this.touchEnd=void 0,this.mouseLeft=void 0,this.mouseRight=void 0,this.lastFrame=void 0,this.canvas=void 0,this.ctx=void 0,this.width=void 0,this.height=void 0,this.activeTouches=void 0,this.colors=void 0,this.offset=void 0,this.state=void 0,this.enableResetFlag=void 0,this.countDownToLock=void 0,this.countDownToSelect=void 0,this.selectedIndex=void 0,this.setCanvas=function(t){e.canvas=t,e.ctx=e.canvas.getContext("2d"),e.onResize()},this.onResize=function(){var t=e.canvas.getBoundingClientRect();e.offset={x:t.left,y:t.top};var i=e.canvas;e.width=i.width,e.height=i.height,e.countDownToLock=m(i,2e3,{color:"red",callback:e.lockPlayers,lineWidth:10})},this.lockPlayers=function(){e.countDownToSelect=m(e.canvas,4e3,{color:"yellow",callback:e.selectRandomPlayer,callbackInterval:e.activeTouches.length-1,lineWidth:10}),e.state=g.Selecting},this.selectRandomPlayer=function(){var t=e.activeTouches[Math.floor(Math.random()*e.activeTouches.length)].id;e.activeTouches=e.activeTouches.filter(function(e){return e.id!=t}),1==e.activeTouches.length&&(e.state=g.Finished)},this.copyTouch=function(t){return{id:t.identifier,position:{x:t.pageX-e.offset.x,y:t.pageY-e.offset.y},color:e.colors[t.identifier]}},this.updateTouches=function(t){if(e.state==g.Empty||e.state==g.Listening){var i=Array.from(t.targetTouches);i.length!=e.activeTouches.length&&e.countDownToLock.reset(),e.activeTouches=i.map(function(t){return e.copyTouch(t)});var o=e.activeTouches.length;o<=1&&(e.state=g.Empty),o>1&&(e.state=g.Listening)}e.state==g.Finished&&(t.targetTouches.length>0&&e.enableResetFlag&&(e.state=g.Empty,e.enableResetFlag=!1),0==t.targetTouches.length&&(e.enableResetFlag=!0))},this.clickAsTouch=function(t){if(e.state==g.Empty||e.state==g.Listening){var i=e.activeTouches.length,o={id:i,position:{x:t.clientX-e.offset.x,y:t.clientY-e.offset.y},color:e.colors[i]};e.activeTouches=[].concat(Object(u.a)(e.activeTouches),[o]),e.activeTouches.length>1&&e.state==g.Empty&&(e.state=g.Listening),e.countDownToLock.reset()}e.state==g.Finished&&(e.activeTouches=[],e.state=g.Empty)},this.clickToCancel=function(t){if(t.preventDefault(),0!=e.activeTouches.length&&e.state!=g.Selecting){if(e.state==g.Finished)return e.activeTouches=[],void(e.state=g.Empty);e.activeTouches=e.activeTouches.slice(0,-1),e.activeTouches.length<=1&&(e.state=g.Empty),e.countDownToLock.reset()}},this.doFrame=function(t){var i=t-e.lastFrame;if(e.lastFrame=t,window.requestAnimationFrame(e.doFrame),null!=e.ctx&&void 0!=e.ctx){var o=e.ctx;if(o.fillStyle="black",o.fillRect(0,0,e.width,e.height),e.state==g.Empty&&e.countDownToLock.reset(),e.state!=g.Finished){var n=!0,c=!1,a=void 0;try{for(var s,r=e.activeTouches[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var h=s.value;o.beginPath(),o.fillStyle=h.color,o.arc(h.position.x,h.position.y,60,0,2*Math.PI),o.fill()}}catch(T){c=!0,a=T}finally{try{n||null==r.return||r.return()}finally{if(c)throw a}}}if(e.state==g.Listening&&e.countDownToLock.draw(i),e.state==g.Selecting&&e.countDownToSelect.draw(i),e.state==g.Finished){var l=!0,u=!1,v=void 0;try{for(var d,f=e.activeTouches[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var m=d.value;o.beginPath(),o.fillStyle=m.color,o.arc(m.position.x,m.position.y,60,0,2*Math.PI),o.fill()}}catch(T){u=!0,v=T}finally{try{l||null==f.return||f.return()}finally{if(u)throw v}}}}},this.testRender=function(){e.activeTouches=[{id:0,position:{x:50,y:50},color:e.colors[0]},{id:1,position:{x:100,y:50},color:e.colors[1]}]},this.lastFrame=0,this.touchStart=this.updateTouches,this.touchMove=this.updateTouches,this.touchEnd=this.updateTouches,this.mouseLeft=this.clickAsTouch,this.mouseRight=this.clickToCancel,this.canvas=null,this.ctx=null,this.countDownToLock=null,this.selectedIndex=-1,this.activeTouches=[],this.colors=Object(u.a)(d),this.offset={x:0,y:0},this.height=this.width=0,this.state=g.Empty,this.enableResetFlag=!1},y=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("p",null,"Testing"),n.a.createElement(l,{height:400,width:600,animator:new T}))};a.a.render(n.a.createElement(y,null),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.60cfd03a.chunk.js.map